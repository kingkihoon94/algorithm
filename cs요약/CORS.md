# CORS와 동일 출처 정책(Same-Origin Policy)

## 동일 출처 정책(Same-Origin Policy)이란?

동일 출처 정책은 브라우저 보안 정책 중 하나로, 한 출처(origin)에서 불러온 문서나 스크립트가 다른 출처의 리소스에 접근하는 것을 제한합니다. 출처는 스킴(scheme), 호스트(host), 포트(port)를 기준으로 판단합니다. 이 정책은 보안을 강화하기 위해 기본적으로 브라우저에 적용되어 있습니다.

### 어떤 공격을 막기 위한 정책인가요?

동일 출처 정책은 주로 **크로스사이트 요청 위조(CSRF, Cross-Site Request Forgery)** 공격의 위력을 낮추기 위해 존재합니다.

CSRF 공격은 다음과 같은 방식으로 이루어집니다:

* 사용자가 인증된 상태로 공격자의 웹사이트에 접속
* 공격자가 사용자의 브라우저를 통해 의도치 않은 요청을 서버로 전송
* 서버는 이를 정상적인 사용자 요청으로 인식하고 민감한 작업 수행

동일 출처 정책은 **악성 웹사이트에서 임의로 다른 출처의 서버에 요청을 보내거나, 그 응답에 접근하는 것을 막음으로써** 이러한 공격의 효과를 줄여줍니다.

---

## CORS(Cross-Origin Resource Sharing)란?

CORS는 서로 다른 출처(origin)에서 제공되는 리소스에 접근할 수 있도록 허용하는 메커니즘입니다. 동일 출처 정책으로 인해 차단될 수 있는 **합법적인 요청들을 허용하기 위해** 만들어졌습니다.

브라우저는 기본적으로 CORS 정책을 따르며, CORS 설정이 되어 있지 않은 서버의 리소스를 요청하면 **응답 자체는 수신하더라도 JavaScript에서 접근할 수 없습니다.**

---

## CORS 적용 방법

서버 측에서 특정 출처의 요청을 허용하려면 다음과 같은 HTTP 헤더를 설정해야 합니다:

### 필수 헤더

* `Access-Control-Allow-Origin`: 허용할 출처를 지정합니다.

  * 예: `Access-Control-Allow-Origin: *` (모든 출처 허용)
  * 예: `Access-Control-Allow-Origin: https://example.com` (특정 출처 허용)

### 선택적 헤더

* `Access-Control-Allow-Methods`: 허용할 HTTP 메소드 지정 (예: `GET, POST, PUT` 등)
* `Access-Control-Allow-Headers`: 요청 시 허용할 헤더 지정 (예: `Content-Type, Authorization` 등)

---

## 프론트엔드 개발자의 역할

프론트엔드 개발자는 일반적으로 서버에 접근이 차단되었을 때 **CORS 에러 메시지를 통해 문제를 확인**할 수 있습니다.

이 경우 서버 개발자에게 다음과 같이 요청해야 합니다:

* 특정 클라이언트 출처를 `Access-Control-Allow-Origin`에 등록해달라고 요청
* 필요한 메소드와 헤더도 허용하도록 설정해달라고 요청

---

## 결론

* 동일 출처 정책은 CSRF 등의 보안 위협으로부터 사용자를 보호합니다.
* 하지만, 이로 인해 유효한 요청도 막히는 경우가 있어, 이를 해결하기 위한 기술이 CORS입니다.
* CORS 설정은 **서버에서 이루어져야 하며**, 프론트엔드는 이를 요청하거나 활용하는 입장입니다.
